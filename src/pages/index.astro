---
import Layout from '../layouts/Layout.astro';

// Carga todos los JSON como datos
const modules = import.meta.glob('../data/tests/*.json', { eager: true, as: 'json' });
const tests = Object.entries(modules).map(([path, data]) => {
  const slug = (path.split('/').pop() ?? '').replace('.json','');
  const typedData = data as { title: string };
  return { slug, title: typedData.title };
});
---
<Layout>
  <h1>Lista de Tests</h1>
  {tests.length > 0 ? (
    <ul>
      {tests.map(({ slug, title }) => (
        <li><a href={`/tests/${slug}/`}>{title}</a></li>
      ))}
    </ul>
  ) : (
    <p>No hay tests en <code>src/data/tests/</code></p>
  )}
</Layout>
